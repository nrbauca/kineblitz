{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Nathalie/Documents/GitHub/kineblitz/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Nathalie/Documents/GitHub/kineblitz/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Nathalie/Documents/GitHub/kineblitz/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import{useAuthState}from'react-firebase-hooks/auth';import{useNavigate}from'react-router-dom';import{auth,firestore,logout}from'../firebase_setup/firebase';import{query,collection,getDocs,where}from'firebase/firestore';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function UserDashboard(){var _useAuthState=useAuthState(auth),_useAuthState2=_slicedToArray(_useAuthState,3),user=_useAuthState2[0],loading=_useAuthState2[1],error=_useAuthState2[2];var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var navigate=useNavigate();var fetchUserName=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var q,doc,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;q=query(collection(firestore,\"users\"),where(\"uid\",\"==\",user===null||user===void 0?void 0:user.uid));_context.next=4;return getDocs(q);case 4:doc=_context.sent;data=doc.docs[0].data();setName(data.name);_context.next=13;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](0);console.error(_context.t0);alert(\"An error occured while fetching user data\");case 13:case\"end\":return _context.stop();}},_callee,null,[[0,9]]);}));return function fetchUserName(){return _ref.apply(this,arguments);};}();useEffect(function(){if(loading)return;if(!user)return navigate(\"/login\");fetchUserName();},[user,loading]);return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"main\",{className:\"user-dashboard\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"user-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"user-information row\",children:[/*#__PURE__*/_jsx(\"img\",{src:true,alt:\"\",className:\"user-pic\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"user-details\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"user-name\",children:name}),/*#__PURE__*/_jsx(\"p\",{className:\"birth-date\",children:\"Birth Date:\"}),/*#__PURE__*/_jsx(\"p\",{className:\"age\",children:\"Age:\"}),/*#__PURE__*/_jsx(\"p\",{className:\"id-num\",children:\"ID No.:\"}),/*#__PURE__*/_jsx(\"p\",{className:\"condition\",children:\"Condition:\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:logout,children:\"Logout\"})]}),/*#__PURE__*/_jsx(\"h3\",{className:\"center\",children:\"Records\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"user-records row\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"gen-button\",id:true,children:\"mm/dd/yy\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"gen-button\",id:true,children:\"mm/dd/yy\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"gen-button\",id:true,children:\"mm/dd/yy\"})]})]})})});}","map":{"version":3,"names":["React","useEffect","useState","useAuthState","useNavigate","auth","firestore","logout","query","collection","getDocs","where","jsx","_jsx","jsxs","_jsxs","UserDashboard","_useAuthState","_useAuthState2","_slicedToArray","user","loading","error","_useState","_useState2","name","setName","navigate","fetchUserName","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","q","doc","data","wrap","_callee$","_context","prev","next","uid","sent","docs","t0","console","alert","stop","apply","arguments","children","className","src","alt","onClick","type","id"],"sources":["C:/Users/Nathalie/Documents/GitHub/kineblitz/src/Pages/UserDashboard.js"],"sourcesContent":["import React, {useEffect, useState } from 'react'\r\nimport { useAuthState } from 'react-firebase-hooks/auth'\r\nimport { useNavigate } from 'react-router-dom'\r\nimport { auth, firestore, logout } from '../firebase_setup/firebase'\r\nimport { query, collection, getDocs, where } from 'firebase/firestore'\r\n\r\nexport default function UserDashboard() {\r\n    const [user, loading, error ] = useAuthState(auth);\r\n    const [name, setName] = useState(\"\");\r\n    const navigate = useNavigate();\r\n    const fetchUserName = async () => {\r\n        try {\r\n            const q = query(collection(firestore, \"users\"), where(\"uid\", \"==\", user?.uid));\r\n            const doc = await getDocs(q);\r\n            const data = doc.docs[0].data();\r\n            setName(data.name);\r\n        } catch (err) {\r\n            console.error(err);\r\n            alert(\"An error occured while fetching user data\");\r\n        }\r\n    };\r\n    useEffect(() => {\r\n        if (loading) return;\r\n        if (!user) return navigate (\"/login\");\r\n        fetchUserName();\r\n    }, [user, loading]);\r\n    return (\r\n        <div>\r\n            <main className=\"user-dashboard\">\r\n                <div className=\"user-container\">\r\n                <div className=\"user-information row\">\r\n                    <img src alt=\"\" className=\"user-pic\" />\r\n                    <div className=\"user-details\">\r\n                    <p className=\"user-name\">{name}</p>\r\n                    <p className=\"birth-date\">Birth Date:</p>\r\n                    <p className=\"age\">Age:</p>\r\n                    <p className=\"id-num\">ID No.:</p>\r\n                    <p className=\"condition\">Condition:</p>\r\n                    </div>\r\n                    <button onClick={logout}>Logout</button>\r\n                </div>\r\n                <h3 className=\"center\">Records</h3>\r\n                <div className=\"user-records row\">\r\n                    <button type=\"submit\" className=\"gen-button\" id>mm/dd/yy</button>\r\n                    <button type=\"submit\" className=\"gen-button\" id>mm/dd/yy</button>\r\n                    <button type=\"submit\" className=\"gen-button\" id>mm/dd/yy</button>\r\n                </div>\r\n                </div>\r\n            </main>\r\n        </div>\r\n    );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}