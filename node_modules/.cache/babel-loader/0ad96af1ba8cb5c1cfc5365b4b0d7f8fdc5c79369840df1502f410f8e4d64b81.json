{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Nathalie/Documents/GitHub/kineblitz/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Nathalie/Documents/GitHub/kineblitz/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Nathalie/Documents/GitHub/kineblitz/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";// import React from 'react';\nimport React,{useEffect,useState}from'react';import{Link,useNavigate}from'react-router-dom';import{useAuthState}from'react-firebase-hooks/auth';import{auth,firestore,logout}from'../FirebaseSetup/firebase';import{query,collection,getDocs,where}from'firebase/firestore';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Dashboard(){var _useAuthState=useAuthState(auth),_useAuthState2=_slicedToArray(_useAuthState,3),user=_useAuthState2[0],loading=_useAuthState2[1],error=_useAuthState2[2];var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var navigate=useNavigate();var fetchUserName=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var q,doc,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;q=query(collection(firestore,\"physicians\"),where(\"uid\",\"==\",user===null||user===void 0?void 0:user.uid));_context.next=4;return getDocs(q);case 4:doc=_context.sent;data=doc.docs[0].data();setName(data.name);_context.next=13;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](0);console.error(_context.t0);alert(\"An error occured while fetching user data\");case 13:case\"end\":return _context.stop();}},_callee,null,[[0,9]]);}));return function fetchUserName(){return _ref.apply(this,arguments);};}();useEffect(function(){if(loading)return;if(!user)return navigate(\"/loginauth\");fetchUserName();},[user,loading]);return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"main\",{className:\"dashboard\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-welcome\",children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"dashboard-header\",children:[\"Welcome, \",/*#__PURE__*/_jsx(\"span\",{className:\"dashboard-user\",children:name}),\"!\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"dashboard-instruction\",children:\"Please select a database to access...\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-options\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"gen-button\",id:true,children:\"User 1\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"gen-button\",id:true,children:\"User 2\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"gen-button\",id:true,children:\"User 3\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"pt-5\",children:/*#__PURE__*/_jsx(\"button\",{onClick:logout,className:\"gen-button px-2 py-2 rounded-lg bg-[#F5C4C4]\",children:\"Sign Out (Temp)\"})})]})})});}","map":{"version":3,"names":["React","useEffect","useState","Link","useNavigate","useAuthState","auth","firestore","logout","query","collection","getDocs","where","jsx","_jsx","jsxs","_jsxs","Dashboard","_useAuthState","_useAuthState2","_slicedToArray","user","loading","error","_useState","_useState2","name","setName","navigate","fetchUserName","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","q","doc","data","wrap","_callee$","_context","prev","next","uid","sent","docs","t0","console","alert","stop","apply","arguments","children","className","type","id","onClick"],"sources":["C:/Users/Nathalie/Documents/GitHub/kineblitz/src/Pages/Dashboard.js"],"sourcesContent":["// import React from 'react';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\nimport { useAuthState } from 'react-firebase-hooks/auth';\r\nimport { auth, firestore, logout } from '../FirebaseSetup/firebase';\r\nimport { query, collection, getDocs, where } from 'firebase/firestore';\r\n\r\nexport default function Dashboard() {\r\n    const [user, loading, error ] = useAuthState(auth);\r\n    const [name, setName] = useState(\"\");\r\n    const navigate = useNavigate();\r\n\r\n    const fetchUserName = async () => {\r\n        try {\r\n            const q = query(collection(firestore, \"physicians\"), where(\"uid\", \"==\", user?.uid));\r\n            const doc = await getDocs(q);\r\n            const data = doc.docs[0].data();\r\n\r\n            setName(data.name);\r\n        } catch (err) {\r\n            console.error(err);\r\n            alert(\"An error occured while fetching user data\");\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (loading) return;\r\n        if (!user) return navigate(\"/loginauth\");\r\n\r\n        fetchUserName();\r\n    }, [user, loading]);\r\n        \r\n    return (\r\n        <div>\r\n            <main className=\"dashboard\">\r\n                <div className=\"dashboard-container\">\r\n                    <div className=\"dashboard-welcome\">\r\n                        <h1 className=\"dashboard-header\">Welcome, <span className=\"dashboard-user\">{name}</span>!</h1>\r\n                        <p className=\"dashboard-instruction\">\r\n                            Please select a database to access...\r\n                        </p>\r\n                    </div>\r\n                    <div className=\"dashboard-options\">\r\n                        <button type=\"submit\" className=\"gen-button\" id>User 1</button>\r\n                        <button type=\"submit\" className=\"gen-button\" id>User 2</button>\r\n                        <button type=\"submit\" className=\"gen-button\" id>User 3</button>\r\n                    </div>\r\n                    <div className=\"pt-5\">\r\n                    <button onClick={logout} className=\"gen-button px-2 py-2 rounded-lg bg-[#F5C4C4]\">Sign Out (Temp)</button>\r\n                    </div>\r\n                </div>\r\n            </main>\r\n        </div>\r\n    );\r\n}\r\n"],"mappings":"sZAAA;AACA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,OAASC,IAAI,CAAEC,WAAW,KAAQ,kBAAkB,CACpD,OAASC,YAAY,KAAQ,2BAA2B,CACxD,OAASC,IAAI,CAAEC,SAAS,CAAEC,MAAM,KAAQ,2BAA2B,CACnE,OAASC,KAAK,CAAEC,UAAU,CAAEC,OAAO,CAAEC,KAAK,KAAQ,oBAAoB,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAEvE,cAAe,SAAS,CAAAC,SAASA,CAAA,CAAG,CAChC,IAAAC,aAAA,CAAgCb,YAAY,CAACC,IAAI,CAAC,CAAAa,cAAA,CAAAC,cAAA,CAAAF,aAAA,IAA3CG,IAAI,CAAAF,cAAA,IAAEG,OAAO,CAAAH,cAAA,IAAEI,KAAK,CAAAJ,cAAA,IAC3B,IAAAK,SAAA,CAAwBtB,QAAQ,CAAC,EAAE,CAAC,CAAAuB,UAAA,CAAAL,cAAA,CAAAI,SAAA,IAA7BE,IAAI,CAAAD,UAAA,IAAEE,OAAO,CAAAF,UAAA,IACpB,GAAM,CAAAG,QAAQ,CAAGxB,WAAW,EAAE,CAE9B,GAAM,CAAAyB,aAAa,6BAAAC,IAAA,CAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,QAAA,MAAAC,CAAA,CAAAC,GAAA,CAAAC,IAAA,QAAAL,mBAAA,GAAAM,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SAAAF,QAAA,CAAAC,IAAA,GAERN,CAAC,CAAG1B,KAAK,CAACC,UAAU,CAACH,SAAS,CAAE,YAAY,CAAC,CAAEK,KAAK,CAAC,KAAK,CAAE,IAAI,CAAES,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEsB,GAAG,CAAC,CAAC,CAAAH,QAAA,CAAAE,IAAA,SACjE,CAAA/B,OAAO,CAACwB,CAAC,CAAC,QAAtBC,GAAG,CAAAI,QAAA,CAAAI,IAAA,CACHP,IAAI,CAAGD,GAAG,CAACS,IAAI,CAAC,CAAC,CAAC,CAACR,IAAI,EAAE,CAE/BV,OAAO,CAACU,IAAI,CAACX,IAAI,CAAC,CAACc,QAAA,CAAAE,IAAA,iBAAAF,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAM,EAAA,CAAAN,QAAA,aAEnBO,OAAO,CAACxB,KAAK,CAAAiB,QAAA,CAAAM,EAAA,CAAK,CAClBE,KAAK,CAAC,2CAA2C,CAAC,CAAC,yBAAAR,QAAA,CAAAS,IAAA,MAAAf,OAAA,gBAE1D,kBAXK,CAAAL,aAAaA,CAAA,SAAAC,IAAA,CAAAoB,KAAA,MAAAC,SAAA,OAWlB,CAEDlD,SAAS,CAAC,UAAM,CACZ,GAAIqB,OAAO,CAAE,OACb,GAAI,CAACD,IAAI,CAAE,MAAO,CAAAO,QAAQ,CAAC,YAAY,CAAC,CAExCC,aAAa,EAAE,CACnB,CAAC,CAAE,CAACR,IAAI,CAAEC,OAAO,CAAC,CAAC,CAEnB,mBACIR,IAAA,QAAAsC,QAAA,cACItC,IAAA,SAAMuC,SAAS,CAAC,WAAW,CAAAD,QAAA,cACvBpC,KAAA,QAAKqC,SAAS,CAAC,qBAAqB,CAAAD,QAAA,eAChCpC,KAAA,QAAKqC,SAAS,CAAC,mBAAmB,CAAAD,QAAA,eAC9BpC,KAAA,OAAIqC,SAAS,CAAC,kBAAkB,CAAAD,QAAA,EAAC,WAAS,cAAAtC,IAAA,SAAMuC,SAAS,CAAC,gBAAgB,CAAAD,QAAA,CAAE1B,IAAI,EAAQ,IAAC,GAAK,cAC9FZ,IAAA,MAAGuC,SAAS,CAAC,uBAAuB,CAAAD,QAAA,CAAC,uCAErC,EAAI,GACF,cACNpC,KAAA,QAAKqC,SAAS,CAAC,mBAAmB,CAAAD,QAAA,eAC9BtC,IAAA,WAAQwC,IAAI,CAAC,QAAQ,CAACD,SAAS,CAAC,YAAY,CAACE,EAAE,MAAAH,QAAA,CAAC,QAAM,EAAS,cAC/DtC,IAAA,WAAQwC,IAAI,CAAC,QAAQ,CAACD,SAAS,CAAC,YAAY,CAACE,EAAE,MAAAH,QAAA,CAAC,QAAM,EAAS,cAC/DtC,IAAA,WAAQwC,IAAI,CAAC,QAAQ,CAACD,SAAS,CAAC,YAAY,CAACE,EAAE,MAAAH,QAAA,CAAC,QAAM,EAAS,GAC7D,cACNtC,IAAA,QAAKuC,SAAS,CAAC,MAAM,CAAAD,QAAA,cACrBtC,IAAA,WAAQ0C,OAAO,CAAEhD,MAAO,CAAC6C,SAAS,CAAC,8CAA8C,CAAAD,QAAA,CAAC,iBAAe,EAAS,EACpG,GACJ,EACH,EACL,CAEd"},"metadata":{},"sourceType":"module","externalDependencies":[]}